
Именование
==========

Данный документ распространяется на все исходные коды данного проекта, включая ядро системы и компоненты и описывает соглашение по именованию констант, переменных, функций, классов, файлов и других объектов проекта.


Файловая система
----------------

Документы предоставляются с расширением `.md` (MarkDown).
Для выделения типовых групп файлов используются префиксы:

- `act.*.php` - "action" файлы с бизнес-логикой
- `cfg.*.php` - файлы конфигурации
- `inc.*.php` - подключаемые библиотеки и вспомогательные скрипты
- `test.*.php` - тестовые модули
- `tpl.*.php` - "template" файлы шаблонов вывода

### Зарезервированные имена файлов:

- `__info__.php` - информационный файл компонента
- `__init__.php` - глобальный инициализатор (autorun), инициализационный файл компонента
- `<act|tpl>.default.php` - обработчик по умолчанию
- `api.main.php` - API компонента
- `cfg.main.php` - конфигурация компонента
- `*_test` - имена тестовых функций внутри тестового модуля

### Зарезервированные имена каталогов:

- `/_admin` - административный интерфейс компонента
- `/_cron` - крон-скрипты компонента
- `/_data` - хранение служебных данных компонента
- `/_docs` - документация компонента
- `/_lang` - языковые файлы (словари) компонента
- `/_libs` - библиотеки компонента
- `/web` - каталог со статикой
- `/web/f` - шрифты
- `/web/i` - изображения
- `/web/i/-srce` - клипарты или макеты
- `/web/s` - стили и джаваскрипты

**ВАЖНО:** Все служебные каталоги компонентов начинаются с подчеркивания, чтобы избежать коллизий с обработчиками.


Языковые объекты
----------------

Все составные имена (кроме классов) пишутся через подчеркивания.
Составные имена классов пишутся в кэмелкейс.

**ИСКЛЮЧЕНИЕ:** Такие библиотеки как `inc.common.php` и `inc.dump.php` по сути расширяют возможности языка PHP, а не ядро или систему, поэтому именование функций в них упрощено и приближено к обычным языковым функциям.

Константы именуются в верхнем регистре.
Глобальные переменные именуются в верхнем регистре.

Служебные и локальные константы, переменные и функции (используемые в рамках одного модуля или функции) предваряются одинарным подчеркиванием.

Если функция используется исключительно внутри программного модуля, ее имя следует писать с подчеркивания.


**ИСКЛЮЧЕНИЕ:** Использовать подчеркивание в локальных переменных функций желательно, но не обязательно. Решающий критерий - читабельность кода функции. Если использование подчеркивания ухудшает читабельность, от него можно отказаться.

`CORE_*` — префикс констант ядра (статусы, приоритеты и т.п.).
`core_*` — префикс глобальных функций API ядра.

**ИСКЛЮЧЕНИЕ:** В редких случаях, когда языковые объекты используются часто или участвуют в сложных комбинациях, как, например, флаги настроек обработчика (`HDL_*`) и зарезервированные имена файлов компонента (`COM_`) можно не использовать префикс ядра (`CORE_*`). Еще один пример такой рационализации/оптимизации - функции API реестра (sys_*).


Ключи реестра и конфигурационные ключи
--------------------------------------

Используется апач-именование, вида:

- `подсистема.механизм.параметр`
- `компонент.параметр`

**ИСКЛЮЧЕНИЕ**: ядро добавляет несколько ключей без префикса, поскольку они не относятся к конкретным подсистемам и являются всесистемными:

- `included` - список подключаемых файлов
- `runtime` - время начала обработки запроса


